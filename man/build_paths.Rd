% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/multipathaic.R
\name{build_paths}
\alias{build_paths}
\title{Multi-Path Forward Selection Using AIC}
\usage{
build_paths(
  X,
  y,
  family = c("gaussian", "binomial"),
  K = min(ncol(X), 10),
  eps = 1e-06,
  delta = 2,
  L = 100,
  weights = NULL,
  verbose = TRUE
)
}
\arguments{
\item{X}{A data frame or matrix of predictors. All predictors must be numeric
or convertible to numeric.}

\item{y}{A numeric response vector. For `family = "binomial"`, must be 0/1.}

\item{family}{Character string: either `"gaussian"` (linear regression) or
`"binomial"` (logistic regression).}

\item{K}{Integer. Maximum number of forward-selection steps to explore.
Default: \code{min(ncol(X), 10)}.}

\item{eps}{Minimum AIC improvement required for a child model to be
considered an improvement over its parent. Default: `1e-6`.}

\item{delta}{AIC tolerance for keeping near-best children at each step.
Children with AIC <= (best child AIC + delta) are retained. Default: 2.}

\item{L}{Maximum number of child models retained at each step after
deduplication. Helps limit tree size. Default: 100.}

\item{weights}{Optional numeric vector of observation weights for the
underlying `lm()` or `glm()` fits.}

\item{verbose}{Logical. If TRUE (default), prints detailed information
about each selection step, including candidate AICs and parent/child
summaries.}
}
\value{
A list containing:
\describe{
  \item{path_forest}{List with `frontiers` component containing models at each step.}
  \item{aic_by_model}{Named list of AIC values indexed by model key.}
  \item{all_models}{A combined data frame of all models explored across
    all steps, sorted by size and AIC.}
  \item{meta}{A list of the parameters used (`K`, `eps`, `delta`,
    `L`, and `family`).}
}
}
\description{
Implements a branching forward-selection algorithm using AIC for either
linear (`gaussian`) or logistic (`binomial`) regression models.

At each step, every current parent model attempts to add every unused
predictor, producing a set of children models. Children are kept if they:
(1) improve AIC relative to the parent by at least `eps`, and
(2) lie within `delta` of the best child AIC for that parent.

Duplicate models are merged, and if more than `L` children remain, only
the `L` best (lowest AIC) models are kept. The process continues for up
to `K` steps or until no parent improves AIC.
}
\details{
This function constructs a *model forest* representing multiple competitive
forward-selection paths, rather than a single greedy stepwise sequence.

For each parent model:
- All possible one-variable additions are evaluated.
- Children that pass AIC filters (`eps` and `delta`) are retained.
- Duplicates are merged by retaining the best AIC among identical
  variable sets.

The algorithm stops early if no parent produces an improved child.
}
\examples{
## Linear regression example
set.seed(1)
n <- 150; p <- 8
X <- as.data.frame(matrix(rnorm(n*p), n, p))
names(X) <- paste0("x", 1:p)
beta <- c(2, -1.5, 0, 0, 1, rep(0, p-5))
y <- as.numeric(as.matrix(X) \%*\% beta + rnorm(n, 1))

forest <- build_paths(
  X, y,
  family = "gaussian",
  K = 10, eps = 1e-6, delta = 2, L = 100,
  verbose = TRUE
)

## Logistic regression example
set.seed(1)
n <- 200; p <- 8
X <- as.data.frame(matrix(rnorm(n*p), n, p))
names(X) <- paste0("x", 1:p)
eta <- 1.5*X$x1 - 2*X$x2 + 1*X$x5
prob <- 1/(1 + exp(-eta))
y <- rbinom(n, 1, prob)

forest <- build_paths(
  X, y,
  family = "binomial",
  K = 10, eps = 1e-6, delta = 2, L = 100,
  verbose = TRUE
)

}
